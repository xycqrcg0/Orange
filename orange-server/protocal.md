# 规定orb文件里存储的二进制格式

## 开头
| 字段     | 含义     | 内容  | 大小（byte） |
| ------ | ------ | --- | -------- |
| symbol | 标志     | odb | 3        |
| sum    | 数据总数   |     | 4        |
| length | base长度 |     | 4        |


## 数据连接
### style
| 结构    | SDS  | list | hash | set  |
| ----- | ---- | ---- | ---- | ---- |
| style | 0x00 | 0x01 | 0x02 | 0x07 |

### 补充
| 字段    | 含义  | 内容       | 大小(byte) |
| ----- | --- | -------- | -------- |
| index | 索引  |          | 4        |
| key   | 键   | 见SDS     |          |
| style | 值类型 | 见规定      | 1        |
| value | 值   | 由style决定 |          |


## 数据结构
### SDS
| 字段     | 含义    | 大小     |
| ------ | ----- | ------ |
| length | 数据长度  | 4      |
| alloc  | 总可用长度 | 4      |
| buf    | 具体数据  | length |

### List
| 字段         | 含义   | 内容   | 大小(byte) |
|------------| ---- | ---- | -------- |
| start(现删除) | 开始标志 | 0xaa | 1        |
| SDS        |      | 见上   | 见上       |
| ···        |      |      |          |
| end        | 结束标志 | 0xee | 1        |

ps:listNode之间有空0x00

### hash
| 字段     | 含义          | 内容        | 大小(byte) |
|--------| ----------- | --------- | ----- |
| sum    | 数据总数        |           | 4     |
| length | hash长度      |           | 4     |
| index  | 内部数据索引      |           | 4     |
| field  | 键           | 见SDS      |       |
| value  | 值           | 见SDS      |       |
| flag   | 标志该索引下是否还有值 | 0xaa/0xee | 1     |
| ···    |             |           |       |
| ···    |             |           |       |

### set
| 字段     | 含义     | 内容   | 大小(byte) |
| ------ | ------ | ---- | -------- |
| sum    | 数据总数   |      | 4        |
| length | hash长度 |      | 4        |
| index  | 内部数据索引 |      | 4        |
| value  | 值      | 见SDS |          |
| ···    |        |      |          |
| ···    |        |      |          |

